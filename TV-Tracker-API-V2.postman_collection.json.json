{
  "info": {
    "_postman_id": "b1e1a3c1-9c77-4f5a-bc21-2ff9aa7b0f02",
    "name": "TV-Tracker API v2",
    "description": "Collection Postman complÃ¨te pour tester lâ€™API TV-Tracker (v2) avec toutes les routes, validations Zod, rÃ´les, filtres, pagination et authentification JWT.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "ðŸ” Authentification",
      "item": [
        {
          "name": "Inscription (succÃ¨s)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"nouveau.user@test.com\",\n  \"nom\": \"Utilisateur Test\",\n  \"username\": \"usertest\",\n  \"password\": \"User123!\",\n  \"role\": \"user\"\n}"
            },
            "url": { "raw": "{{base_url}}/auth/register", "host": ["{{base_url}}"], "path": ["auth", "register"] }
          },
          "response": [
            {
              "name": "Exemple de succÃ¨s",
              "originalRequest": {},
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"_id\": \"675e9df7a8d41f001e5bca10\",\n  \"email\": \"nouveau.user@test.com\",\n  \"username\": \"usertest\",\n  \"role\": \"user\"\n}"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Statut 201 - CrÃ©Ã©\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Inscription (erreur Zod - email invalide)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"invalidemail\",\n  \"nom\": \"Test\",\n  \"username\": \"invalidUser\",\n  \"password\": \"User123!\",\n  \"role\": \"user\"\n}"
            },
            "url": { "raw": "{{base_url}}/auth/register", "host": ["{{base_url}}"], "path": ["auth", "register"] }
          },
          "response": [
            {
              "name": "Erreur Zod email",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"message\": \"Erreur de validation\",\n  \"details\": [\n    {\n      \"path\": [\"email\"],\n      \"message\": \"Lâ€™adresse courriel est invalide. Veuillez entrer un format valide (exemple : utilisateur@domaine.com).\"\n    }\n  ]\n}"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Statut 400 - Erreur de validation\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Connexion (admin)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@media.com\",\n  \"password\": \"Admin123!\"\n}"
            },
            "url": { "raw": "{{base_url}}/auth/login", "host": ["{{base_url}}"], "path": ["auth", "login"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "pm.test(\"Statut 200 - Connexion admin\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "if (jsonData.token) {",
                  "    pm.collectionVariables.set('token_admin', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Connexion (utilisateur)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@test.com\",\n  \"password\": \"User123!\"\n}"
            },
            "url": { "raw": "{{base_url}}/auth/login", "host": ["{{base_url}}"], "path": ["auth", "login"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "pm.test(\"Statut 200 - Connexion utilisateur\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "if (jsonData.token) {",
                  "    pm.collectionVariables.set('token_user', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸ‘¥ Utilisateurs",
      "item": [
        {
          "name": "Afficher profil (GET /users/me)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/users/me",
              "host": ["{{base_url}}"],
              "path": ["users", "me"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Statut 200 - Profil utilisateur rÃ©cupÃ©rÃ©\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Exemple - DonnÃ©es utilisateur",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"_id\": \"671cf1a12a8cbb42cde4a002\",\n  \"email\": \"john.doe@test.com\",\n  \"username\": \"johndoe\",\n  \"role\": \"user\",\n  \"favorites\": [\"671cf1a12a8cbb42cde4a103\", \"671cf1a12a8cbb42cde4a104\"]\n}"
            }
          ]
        },
        {
          "name": "Mettre Ã  jour profil (PATCH /users/me)",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"johnupdated\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/me",
              "host": ["{{base_url}}"],
              "path": ["users", "me"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Statut 200 - Profil mis Ã  jour\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Afficher un utilisateur (GET /users/:id) (admin)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" }
            ],
            "url": {
              "raw": "{{base_url}}/users/671cf1a12a8cbb42cde4a002",
              "host": ["{{base_url}}"],
              "path": ["users", "671cf1a12a8cbb42cde4a002"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Statut 200 - Utilisateur rÃ©cupÃ©rÃ© (admin)\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Erreur - accÃ¨s interdit (user essaye GET /users/:id)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/users/671cf1a12a8cbb42cde4a002",
              "host": ["{{base_url}}"],
              "path": ["users", "671cf1a12a8cbb42cde4a002"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Statut 403 - RÃ´le non autorisÃ©\", function () {",
                  "  pm.response.to.have.status(403);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Exemple erreur rÃ´le",
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "json",
              "body": "{ \"message\": \"AccÃ¨s interdit : rÃ´le insuffisant.\" }"
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸŽ¬ Films",
      "item": [
        {
          "name": "Lister tous les films (GET /movies)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": { "raw": "{{base_url}}/movies", "host": ["{{base_url}}"], "path": ["movies"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 - Films rÃ©cupÃ©rÃ©s', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Exemple - Liste de films",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "[\n  { \"_id\": \"671cf1a12a8cbb42cde4a101\", \"title\": \"Red Horizon\", \"genres\": [\"Action\", \"Sci-Fi\"], \"durationMin\": 123 },\n  { \"_id\": \"671cf1a12a8cbb42cde4a102\", \"title\": \"Neon Skies\", \"genres\": [\"Drama\", \"Thriller\"], \"durationMin\": 110 }\n]"
            }
          ]
        },
        {
          "name": "Lister les films filtrÃ©s (GET /movies?genre=Sci-Fi)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token_user}}" }],
            "url": {
              "raw": "{{base_url}}/movies?genre=Sci-Fi",
              "host": ["{{base_url}}"],
              "path": ["movies"],
              "query": [{ "key": "genre", "value": "Sci-Fi" }]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 - Filtrage rÃ©ussi', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Lister les films avec pagination (GET /movies?page=2&limit=5)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token_user}}" }],
            "url": {
              "raw": "{{base_url}}/movies?page=2&limit=5",
              "host": ["{{base_url}}"],
              "path": ["movies"],
              "query": [
                { "key": "page", "value": "2" },
                { "key": "limit", "value": "5" }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 - Pagination OK', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Afficher un film par ID (GET /movies/:id)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token_user}}" }],
            "url": {
              "raw": "{{base_url}}/movies/671cf1a12a8cbb42cde4a101",
              "host": ["{{base_url}}"],
              "path": ["movies", "671cf1a12a8cbb42cde4a101"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 - Film trouvÃ©', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "CrÃ©er un film (admin) (POST /movies)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"New Movie\",\n  \"genres\": [\"Action\"],\n  \"synopsis\": \"Film de test\",\n  \"durationMin\": 120\n}"
            },
            "url": { "raw": "{{base_url}}/movies", "host": ["{{base_url}}"], "path": ["movies"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 201 - Film crÃ©Ã©', function () {",
                  "  pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "CrÃ©er un film (erreur Zod - titre invalide)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"@@@@\",\n  \"genres\": [\"Action\"],\n  \"durationMin\": 120\n}"
            },
            "url": { "raw": "{{base_url}}/movies", "host": ["{{base_url}}"], "path": ["movies"] }
          },
          "response": [
            {
              "name": "Erreur titre Zod",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "body": "{ \"message\": \"Le titre doit comporter entre 1 et 200 caractÃ¨res et ne contenir que des lettres, chiffres ou ponctuations simples.\" }"
            }
          ]
        },
        {
          "name": "Mettre Ã  jour un film (PATCH /movies/:id)",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Red Horizon Updated\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/movies/671cf1a12a8cbb42cde4a101",
              "host": ["{{base_url}}"],
              "path": ["movies", "671cf1a12a8cbb42cde4a101"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 - Film mis Ã  jour', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Supprimer un film (DELETE /movies/:id)",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" }
            ],
            "url": {
              "raw": "{{base_url}}/movies/671cf1a12a8cbb42cde4a120",
              "host": ["{{base_url}}"],
              "path": ["movies", "671cf1a12a8cbb42cde4a120"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 - Film supprimÃ©', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸ“º SÃ©ries et Saisons",
      "item": [
        {
          "name": "Lister toutes les sÃ©ries (GET /series)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": { "raw": "{{base_url}}/series", "host": ["{{base_url}}"], "path": ["series"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 â€“ SÃ©ries rÃ©cupÃ©rÃ©es', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Filtrer les sÃ©ries (GET /series?status=ongoing)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/series?status=ongoing",
              "host": ["{{base_url}}"],
              "path": ["series"],
              "query": [{ "key": "status", "value": "ongoing" }]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 â€“ Filtrage OK', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "CrÃ©er une sÃ©rie (admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Nouvelle SÃ©rie\",\n  \"genres\": [\"Action\"],\n  \"status\": \"ongoing\"\n}"
            },
            "url": { "raw": "{{base_url}}/series", "host": ["{{base_url}}"], "path": ["series"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 201 â€“ SÃ©rie crÃ©Ã©e', function () {",
                  "  pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "CrÃ©er une sÃ©rie (erreur Zod â€“ statut invalide)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"BadStatus\",\n  \"genres\": [\"Action\"],\n  \"status\": \"finished\"\n}"
            },
            "url": { "raw": "{{base_url}}/series", "host": ["{{base_url}}"], "path": ["series"] }
          },
          "response": [
            {
              "name": "Erreur Zod statut",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "body": "{ \"message\": \"Le statut de la sÃ©rie doit Ãªtre 'ongoing' ou 'ended'.\" }"
            }
          ]
        },
        {
          "name": "CrÃ©er une saison (POST /series/:seriesId/seasons)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"seriesId\": \"671cf1a12a8cbb42cde4b001\",\n  \"seasonNo\": 3,\n  \"episodes\": 10\n}"
            },
            "url": {
              "raw": "{{base_url}}/series/671cf1a12a8cbb42cde4b001/seasons",
              "host": ["{{base_url}}"],
              "path": ["series", "671cf1a12a8cbb42cde4b001", "seasons"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 201 â€“ Saison crÃ©Ã©e', function () {",
                  "  pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "CrÃ©er une saison (erreur Zod â€“ seasonNo = 0)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"seriesId\": \"671cf1a12a8cbb42cde4b001\",\n  \"seasonNo\": 0,\n  \"episodes\": 10\n}"
            },
            "url": {
              "raw": "{{base_url}}/series/671cf1a12a8cbb42cde4b001/seasons",
              "host": ["{{base_url}}"],
              "path": ["series", "671cf1a12a8cbb42cde4b001", "seasons"]
            }
          },
          "response": [
            {
              "name": "Erreur Zod seasonNo",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "body": "{ \"message\": \"Le numÃ©ro de la saison doit Ãªtre supÃ©rieur ou Ã©gal Ã  1.\" }"
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸŽžï¸ Ã‰pisodes et Ã‰valuations",
      "item": [
        {
          "name": "CrÃ©er un Ã©pisode (admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"epNo\": 3,\n  \"title\": \"Nouvel Ã‰pisode\",\n  \"durationMin\": 48\n}"
            },
            "url": {
              "raw": "{{base_url}}/series/671cf1a12a8cbb42cde4b001/seasons/671cf1a12a8cbb42cde4c001/episodes",
              "host": ["{{base_url}}"],
              "path": ["series", "671cf1a12a8cbb42cde4b001", "seasons", "671cf1a12a8cbb42cde4c001", "episodes"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 201 â€“ Ã‰pisode crÃ©Ã©', function () {",
                  "  pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "CrÃ©er un Ã©pisode (erreur Zod â€“ titre invalide)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_admin}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"epNo\": 1,\n  \"title\": \"@@@@\",\n  \"durationMin\": 45\n}"
            },
            "url": {
              "raw": "{{base_url}}/series/671cf1a12a8cbb42cde4b001/seasons/671cf1a12a8cbb42cde4c001/episodes",
              "host": ["{{base_url}}"],
              "path": ["series", "671cf1a12a8cbb42cde4b001", "seasons", "671cf1a12a8cbb42cde4c001", "episodes"]
            }
          },
          "response": [
            {
              "name": "Erreur Zod titre",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "body": "{ \"message\": \"Le titre de lâ€™Ã©pisode doit comporter entre 1 et 200 caractÃ¨res valides.\" }"
            }
          ]
        },
        {
          "name": "Lister les Ã©pisodes (GET /series/:seriesId/seasons/:seasonId/episodes)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/series/671cf1a12a8cbb42cde4b001/seasons/671cf1a12a8cbb42cde4c001/episodes",
              "host": ["{{base_url}}"],
              "path": ["series", "671cf1a12a8cbb42cde4b001", "seasons", "671cf1a12a8cbb42cde4c001", "episodes"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 â€“ Ã‰pisodes rÃ©cupÃ©rÃ©s', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Filtrer les Ã©pisodes (GET â€¦?minDuration=50)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/series/671cf1a12a8cbb42cde4b001/seasons/671cf1a12a8cbb42cde4c001/episodes?minDuration=50",
              "host": ["{{base_url}}"],
              "path": ["series", "671cf1a12a8cbb42cde4b001", "seasons", "671cf1a12a8cbb42cde4c001", "episodes"],
              "query": [{ "key": "minDuration", "value": "50" }]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 â€“ Filtrage OK', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Poster une Ã©valuation (POST /ratings)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"671cf1a12a8cbb42cde4a002\",\n  \"target\": \"movie\",\n  \"targetId\": \"671cf1a12a8cbb42cde4a101\",\n  \"score\": 8,\n  \"review\": \"TrÃ¨s bon film !\"\n}"
            },
            "url": { "raw": "{{base_url}}/ratings", "host": ["{{base_url}}"], "path": ["ratings"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 201 â€“ Ã‰valuation crÃ©Ã©e', function () {",
                  "  pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Poster une Ã©valuation (erreur Zod â€“ score > 10)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"671cf1a12a8cbb42cde4a002\",\n  \"target\": \"movie\",\n  \"targetId\": \"671cf1a12a8cbb42cde4a101\",\n  \"score\": 11\n}"
            },
            "url": { "raw": "{{base_url}}/ratings", "host": ["{{base_url}}"], "path": ["ratings"] }
          },
          "response": [
            {
              "name": "Erreur Zod score",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "body": "{ \"message\": \"La note maximale est de 10.\" }"
            }
          ]
        },
        {
          "name": "Moyenne des notes film (GET /ratings/avg/movie/:id)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/ratings/avg/movie/671cf1a12a8cbb42cde4a101",
              "host": ["{{base_url}}"],
              "path": ["ratings", "avg", "movie", "671cf1a12a8cbb42cde4a101"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 â€“ Moyenne film OK', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Moyenne des notes sÃ©rie (GET /ratings/avg/series/:id)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/ratings/avg/series/671cf1a12a8cbb42cde4b001",
              "host": ["{{base_url}}"],
              "path": ["ratings", "avg", "series", "671cf1a12a8cbb42cde4b001"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 â€“ Moyenne sÃ©rie OK', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸ¤– Recommandations",
      "item": [
        {
          "name": "Recommandations de films similaires (GET /reco/movies/similar/:movieId)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/reco/movies/similar/671cf1a12a8cbb42cde4a101",
              "host": ["{{base_url}}"],
              "path": ["reco", "movies", "similar", "671cf1a12a8cbb42cde4a101"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statut 200 â€“ Recommandations rÃ©cupÃ©rÃ©es', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Exemple - Recommandations",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "[\n  { \"_id\": \"671cf1a12a8cbb42cde4a116\", \"title\": \"Solar Vengeance\" },\n  { \"_id\": \"671cf1a12a8cbb42cde4a119\", \"title\": \"Eclipse Protocol\" }\n]"
            }
          ]
        },
        {
          "name": "Recommandations (erreur â€“ id invalide)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token_user}}" }
            ],
            "url": {
              "raw": "{{base_url}}/reco/movies/similar/invalidId",
              "host": ["{{base_url}}"],
              "path": ["reco", "movies", "similar", "invalidId"]
            }
          },
          "response": [
            {
              "name": "Erreur ID invalide",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "body": "{ \"message\": \"Identifiant du film invalide.\" }"
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    { "key": "base_url", "value": "https://localhost:3333/api/v2" },
    { "key": "token_user", "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MDdlZGJlYjEwZTg0YzBlOWRjZWU5OSIsInJvbGUiOiJ1c2VyIiwidXNlcm5hbWUiOiJ1c2VydGVzdCIsImlhdCI6MTc2MjEyNzI5NCwiZXhwIjoxNzYyMTMwODk0fQ.9PBOCRILHNVBZtarxThDmF5EXi1YAU4q0PbRLCmXMnI" },
    { "key": "token_admin", "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3MWNmMWExMmE4Y2JiNDJjZGU0YTAwMSIsInJvbGUiOiJhZG1pbiIsInVzZXJuYW1lIjoiYWRtaW4iLCJpYXQiOjE3NjIxMjczMTksImV4cCI6MTc2MjEzMDkxOX0.gVn12Li-CegyW3olw7wIGQ7x9YHq0n-UJEGpzZsX-EQ" }
  ]
}
